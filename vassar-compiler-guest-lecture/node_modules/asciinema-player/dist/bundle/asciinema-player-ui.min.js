var AsciinemaPlayer=function(e){"use strict";class t{log(){}debug(){}info(){}warn(){}error(){}}const n={};const r=Symbol("solid-proxy"),o=Symbol("solid-track"),s={equals:(e,t)=>e===t};let i=T;const l=1,a=2,c={owned:null,cleanups:null,context:null,owner:null};var u=null;let f=null,d=null,h=null,p=null,g=0;function v(e,t){const n=d,r=u,o=0===e.length,s=o?c:{owned:null,cleanups:null,context:null,owner:void 0===t?r:t},i=o?e:()=>e((()=>w((()=>z(s)))));u=s,d=null;try{return F(i,!0)}finally{d=n,u=r}}function m(e,t){const n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},s,t):s).equals||void 0};return[_.bind(n),e=>("function"==typeof e&&(e=e(n.value)),C(n,e))]}function y(e,t,n){S(P(e,t,!1,l))}function b(e,t,n){n=n?Object.assign({},s,n):s;const r=P(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,S(r),_.bind(r)}function k(e){return F(e,!1)}function w(e){if(null===d)return e();const t=d;d=null;try{return e()}finally{d=t}}function $(e){!function(e,t,n){i=H;const r=P(e,t,!1,l);r.user=!0,p?p.push(r):S(r)}((()=>w(e)))}function x(e){return null===u||(null===u.cleanups?u.cleanups=[e]:u.cleanups.push(e)),e}function A(){return d}function L(e){const t=b(e),n=b((()=>N(t())));return n.toArray=()=>{const e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function _(){const e=f;if(this.sources&&(this.state||e))if(this.state===l||e)S(this);else{const e=h;h=null,F((()=>O(this)),!1),h=e}if(d){const e=this.observers?this.observers.length:0;d.sources?(d.sources.push(this),d.sourceSlots.push(e)):(d.sources=[this],d.sourceSlots=[e]),this.observers?(this.observers.push(d),this.observerSlots.push(d.sources.length-1)):(this.observers=[d],this.observerSlots=[d.sources.length-1])}return this.value}function C(e,t,n){let r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&F((()=>{for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t],r=f&&f.running;r&&f.disposed.has(n),(r&&!n.tState||!r&&!n.state)&&(n.pure?h.push(n):p.push(n),n.observers&&M(n)),r||(n.state=l)}if(h.length>1e6)throw h=[],new Error}),!1)),t}function S(e){if(!e.fn)return;z(e);const t=u,n=d,r=g;d=u=e,function(e,t,n){let r;try{r=e.fn(t)}catch(t){e.pure&&(e.state=l,e.owned&&e.owned.forEach(z),e.owned=null),j(t)}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?C(e,r):e.value=r,e.updatedAt=n)}(e,e.value,r),d=n,u=t}function P(e,t,n,r=l,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:u,context:null,pure:n};return null===u||u!==c&&(u.owned?u.owned.push(s):u.owned=[s]),s}function E(e){const t=f;if(0===e.state||t)return;if(e.state===a||t)return O(e);if(e.suspense&&w(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<g);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if((e=n[r]).state===l||t)S(e);else if(e.state===a||t){const t=h;h=null,F((()=>O(e,n[0])),!1),h=t}}function F(e,t){if(h)return e();let n=!1;t||(h=[]),p?n=!0:p=[],g++;try{const t=e();return function(e){h&&(T(h),h=null);if(e)return;const t=p;p=null,t.length&&F((()=>i(t)),!1)}(n),t}catch(e){n||(p=null),h=null,j(e)}}function T(e){for(let t=0;t<e.length;t++)E(e[t])}function H(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:E(n)}var o;for(n.context&&(n.context=o),t=0;t<r;t++)E(e[t])}function O(e,t){const n=f;e.state=0;for(let r=0;r<e.sources.length;r+=1){const o=e.sources[r];o.sources&&(o.state===l||n?o!==t&&E(o):(o.state===a||n)&&O(o,t))}}function M(e){const t=f;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];r.state&&!t||(r.state=a,r.pure?h.push(r):p.push(r),r.observers&&M(r))}}function z(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),o=t.observerSlots.pop();n<r.length&&(e.sourceSlots[o]=n,r[n]=e,t.observerSlots[n]=o)}}if(e.owned){for(t=0;t<e.owned.length;t++)z(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function j(e){throw e=function(e){return e instanceof Error||"string"==typeof e?e:new Error("Unknown error")}(e)}function N(e){if("function"==typeof e&&!e.length)return N(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=N(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}const W=Symbol("fallback");function D(e){for(let t=0;t<e.length;t++)e[t]()}function K(e,t){return w((()=>e(t||{})))}function B(){return!0}const q={get:(e,t,n)=>t===r?n:e.get(t),has:(e,t)=>t===r||e.has(t),set:B,deleteProperty:B,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:B,deleteProperty:B}),ownKeys:e=>e.keys()};function R(e){return(e="function"==typeof e?e():e)?e:{}}function I(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r=[],s=[],i=[],l=0,a=t.length>1?[]:null;return x((()=>D(i))),()=>{let c,u,f=e()||[];return f[o],w((()=>{let e,t,o,h,p,g,m,y,b,k=f.length;if(0===k)0!==l&&(D(i),i=[],r=[],s=[],l=0,a&&(a=[])),n.fallback&&(r=[W],s[0]=v((e=>(i[0]=e,n.fallback()))),l=1);else if(0===l){for(s=new Array(k),u=0;u<k;u++)r[u]=f[u],s[u]=v(d);l=k}else{for(o=new Array(k),h=new Array(k),a&&(p=new Array(k)),g=0,m=Math.min(l,k);g<m&&r[g]===f[g];g++);for(m=l-1,y=k-1;m>=g&&y>=g&&r[m]===f[y];m--,y--)o[y]=s[m],h[y]=i[m],a&&(p[y]=a[m]);for(e=new Map,t=new Array(y+1),u=y;u>=g;u--)b=f[u],c=e.get(b),t[u]=void 0===c?-1:c,e.set(b,u);for(c=g;c<=m;c++)b=r[c],u=e.get(b),void 0!==u&&-1!==u?(o[u]=s[c],h[u]=i[c],a&&(p[u]=a[c]),u=t[u],e.set(b,u)):i[c]();for(u=g;u<k;u++)u in o?(s[u]=o[u],i[u]=h[u],a&&(a[u]=p[u],a[u](u))):s[u]=v(d);s=s.slice(0,l=k),r=f.slice(0)}return s}));function d(e){if(i[u]=e,a){const[e,n]=m(u);return a[u]=n,t(f[u],e)}return t(f[u])}}}((()=>e.each),e.children,t||void 0))}function Z(e){const t="fallback"in e&&{fallback:()=>e.fallback};return b(function(e,t,n={}){let r,s=[],i=[],l=[],a=[],c=0;return x((()=>D(l))),()=>{const u=e()||[];return u[o],w((()=>{if(0===u.length)return 0!==c&&(D(l),l=[],s=[],i=[],c=0,a=[]),n.fallback&&(s=[W],i[0]=v((e=>(l[0]=e,n.fallback()))),c=1),i;for(s[0]===W&&(l[0](),l=[],s=[],i=[],c=0),r=0;r<u.length;r++)r<s.length&&s[r]!==u[r]?a[r]((()=>u[r])):r>=s.length&&(i[r]=v(f));for(;r<s.length;r++)l[r]();return c=a.length=l.length=u.length,s=u.slice(0),i=i.slice(0,c)}));function f(e){l[r]=e;const[n,o]=m(u[r]);return a[r]=o,t(n,r)}}}((()=>e.each),e.children,t||void 0))}function U(e){let t=!1;const n=e.keyed,r=b((()=>e.when),void 0,{equals:(e,n)=>t?e===n:!e==!n});return b((()=>{const o=r();if(o){const r=e.children,s="function"==typeof r&&r.length>0;return t=n||s,s?w((()=>r(o))):r}return e.fallback}),void 0,void 0)}function X(e){let t=!1,n=!1;const r=L((()=>e.children)),o=b((()=>{let e=r();Array.isArray(e)||(e=[e]);for(let t=0;t<e.length;t++){const r=e[t].when;if(r)return n=!!e[t].keyed,[t,r,e[t]]}return[-1]}),void 0,{equals:(e,n)=>e[0]===n[0]&&(t?e[1]===n[1]:!e[1]==!n[1])&&e[2]===n[2]});return b((()=>{const[r,s,i]=o();if(r<0)return e.fallback;const l=i.children,a="function"==typeof l&&l.length>0;return t=n||a,a?w((()=>l(s))):l}),void 0,void 0)}function G(e){return e}const V="_$DX_DELEGATE";function J(e,t,n,r={}){let o;return v((r=>{o=r,t===document?e():oe(t,e(),t.firstChild?null:void 0,n)}),r.owner),()=>{o(),t.textContent=""}}function Q(e,t,n){const r=document.createElement("template");r.innerHTML=e;let o=r.content.firstChild;return n&&(o=o.firstChild),o}function Y(e,t=window.document){const n=t[V]||(t[V]=new Set);for(let r=0,o=e.length;r<o;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,se))}}function ee(e,t){null==t?e.removeAttribute("class"):e.className=t}function te(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const r=n[0];e.addEventListener(t,n[0]=t=>r.call(e,n[1],t))}else e.addEventListener(t,n)}function ne(e,t,n){if(!t)return n?function(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}(e,"style"):t;const r=e.style;if("string"==typeof t)return r.cssText=t;let o,s;for(s in"string"==typeof n&&(r.cssText=n=void 0),n||(n={}),t||(t={}),n)null==t[s]&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function re(e,t,n){return w((()=>e(t,n)))}function oe(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return ie(e,t,r,n);y((r=>ie(e,t(),r,n)),r)}function se(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document}),n.registry&&!n.done&&(n.done=!0,document.querySelectorAll("[id^=pl-]").forEach((t=>{for(;t&&8!==t.nodeType&&t.nodeValue!=="pl-"+e;){let e=t.nextSibling;t.remove(),t=e}t&&t.remove()})));r;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(void 0!==o?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function ie(e,t,r,o,s){for(n.context&&!r&&(r=[...e.childNodes]);"function"==typeof r;)r=r();if(t===r)return r;const i=typeof t,l=void 0!==o;if(e=l&&r[0]&&r[0].parentNode||e,"string"===i||"number"===i){if(n.context)return r;if("number"===i&&(t=t.toString()),l){let n=r[0];n&&3===n.nodeType?n.data=t:n=document.createTextNode(t),r=ce(e,r,o,n)}else r=""!==r&&"string"==typeof r?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===i){if(n.context)return r;r=ce(e,r,o)}else{if("function"===i)return y((()=>{let n=t();for(;"function"==typeof n;)n=n();r=ie(e,n,r,o)})),()=>r;if(Array.isArray(t)){const i=[],a=r&&Array.isArray(r);if(le(i,t,r,s))return y((()=>r=ie(e,i,r,o,!0))),()=>r;if(n.context){if(!i.length)return r;for(let e=0;e<i.length;e++)if(i[e].parentNode)return r=i}if(0===i.length){if(r=ce(e,r,o),l)return r}else a?0===r.length?ae(e,i,o):function(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,a=t[o-1].nextSibling,c=null;for(;i<o||l<s;)if(t[i]!==n[l]){for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const t=s<r?l?n[l-1].nextSibling:n[s-l]:a;for(;l<s;)e.insertBefore(n[l++],t)}else if(s===l)for(;i<o;)c&&c.has(t[i])||t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const r=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],r),t[o]=n[s]}else{if(!c){c=new Map;let e=l;for(;e<s;)c.set(n[e],e++)}const r=c.get(t[i]);if(null!=r)if(l<r&&r<s){let a,u=i,f=1;for(;++u<o&&u<s&&null!=(a=c.get(t[u]))&&a===r+f;)f++;if(f>r-l){const o=t[i];for(;l<r;)e.insertBefore(n[l++],o)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}else i++,l++}(e,r,i):(r&&ce(e),ae(e,i));r=i}else if(t instanceof Node){if(n.context&&t.parentNode)return r=l?[t]:t;if(Array.isArray(r)){if(l)return r=ce(e,r,o,t);ce(e,r,null,t)}else null!=r&&""!==r&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);r=t}}return r}function le(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let i=t[s],l=n&&n[s];if(i instanceof Node)e.push(i);else if(null==i||!0===i||!1===i);else if(Array.isArray(i))o=le(e,i,l)||o;else if("function"==typeof i)if(r){for(;"function"==typeof i;)i=i();o=le(e,Array.isArray(i)?i:[i],Array.isArray(l)?l:[l])||o}else e.push(i),o=!0;else{const t=String(i);l&&3===l.nodeType&&l.data===t?e.push(l):e.push(document.createTextNode(t))}}return o}function ae(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ce(e,t,n,r){if(void 0===n)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let r=!1;for(let s=t.length-1;s>=0;s--){const i=t[s];if(o!==i){const t=i.parentNode===e;r||s?t&&i.remove():t?e.replaceChild(o,i):e.insertBefore(o,n)}else r=!0}}else e.insertBefore(o,n);return[o]}const ue=Symbol("store-raw"),fe=Symbol("store-node"),de=Symbol("store-name");function he(e,t){let n=e[r];if(!n&&(Object.defineProperty(e,r,{value:n=new Proxy(e,ke)}),!Array.isArray(e))){const t=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=t.length;o<s;o++){const s=t[o];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(n)})}}return n}function pe(e){let t;return null!=e&&"object"==typeof e&&(e[r]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ge(e,t=new Set){let n,r,o,s;if(n=null!=e&&e[ue])return n;if(!pe(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let n=0,s=e.length;n<s;n++)o=e[n],(r=ge(o,t))!==o&&(e[n]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const n=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let l=0,a=n.length;l<a;l++)s=n[l],i[s].get||(o=e[s],(r=ge(o,t))!==o&&(e[s]=r))}return e}function ve(e){let t=e[fe];return t||Object.defineProperty(e,fe,{value:t={}}),t}function me(e,t,n){return e[t]||(e[t]=be(n))}function ye(e){if(A()){const t=ve(e);(t._||(t._=be()))()}}function be(e){const[t,n]=m(e,{equals:!1,internal:!0});return t.$=n,t}const ke={get(e,t,n){if(t===ue)return e;if(t===r)return n;if(t===o)return ye(e),n;const s=ve(e),i=s.hasOwnProperty(t);let l=i?s[t]():e[t];if(t===fe||"__proto__"===t)return l;if(!i){const n=Object.getOwnPropertyDescriptor(e,t);!A()||"function"==typeof l&&!e.hasOwnProperty(t)||n&&n.get||(l=me(s,t,l)())}return pe(l)?he(l):l},has(e,t){return t===ue||t===r||t===o||t===fe||"__proto__"===t||(this.get(e,t,e),t in e)},set:()=>!0,deleteProperty:()=>!0,ownKeys:function(e){return ye(e),Reflect.ownKeys(e)},getOwnPropertyDescriptor:function(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return n&&!n.get&&n.configurable&&t!==r&&t!==fe&&t!==de?(delete n.value,delete n.writable,n.get=()=>e[r][t],n):n}};function we(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;void 0===n?delete e[t]:e[t]=n;let i,l=ve(e);(i=me(l,t,o))&&i.$((()=>n)),Array.isArray(e)&&e.length!==s&&(i=me(l,"length",s))&&i.$(e.length),(i=l._)&&i.$()}function $e(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];we(e,o,t[o])}}function xe(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const s=typeof r,i=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)xe(e,[r[o]].concat(t),n);return}if(i&&"function"===s){for(let o=0;o<e.length;o++)r(e[o],o)&&xe(e,[o].concat(t),n);return}if(i&&"object"===s){const{from:o=0,to:s=e.length-1,by:i=1}=r;for(let r=o;r<=s;r+=i)xe(e,[r].concat(t),n);return}if(t.length>1)return void xe(e[r],t,[r].concat(n));o=e[r],n=[r].concat(n)}let s=t[0];"function"==typeof s&&(s=s(o,n),s===o)||void 0===r&&null==s||(s=ge(s),void 0===r||pe(o)&&pe(s)&&!Array.isArray(s)?$e(o,s):we(e,r,s))}function Ae(...[e,t]){const n=ge(e||{}),r=Array.isArray(n);return[he(n),function(...e){k((()=>{r&&1===e.length?function(e,t){if("function"==typeof t&&(t=t(e)),t=ge(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const r=t[n];e[n]!==r&&we(e,n,r)}we(e,"length",r)}else $e(e,t)}(n,e[0]):xe(n,e)}))}]}const Le=Symbol("store-root");function _e(e,t,n,r,o){const s=t[n];if(e===s)return;if(!pe(e)||!pe(s)||o&&e[o]!==s[o]){if(e!==s){if(n===Le)return e;we(t,n,e)}return}if(Array.isArray(e)){if(e.length&&s.length&&(!r||o&&e[0]&&null!=e[0][o])){let t,n,i,l,a,c,u,f;for(i=0,l=Math.min(s.length,e.length);i<l&&(s[i]===e[i]||o&&s[i]&&e[i]&&s[i][o]===e[i][o]);i++)_e(e[i],s,i,r,o);const d=new Array(e.length),h=new Map;for(l=s.length-1,a=e.length-1;l>=i&&a>=i&&(s[l]===e[a]||o&&s[i]&&e[i]&&s[l][o]===e[a][o]);l--,a--)d[a]=s[l];if(i>a||i>l){for(n=i;n<=a;n++)we(s,n,e[n]);for(;n<e.length;n++)we(s,n,d[n]),_e(e[n],s,n,r,o);return void(s.length>e.length&&we(s,"length",e.length))}for(u=new Array(a+1),n=a;n>=i;n--)c=e[n],f=o&&c?c[o]:c,t=h.get(f),u[n]=void 0===t?-1:t,h.set(f,n);for(t=i;t<=l;t++)c=s[t],f=o&&c?c[o]:c,n=h.get(f),void 0!==n&&-1!==n&&(d[n]=s[t],n=u[n],h.set(f,n));for(n=i;n<e.length;n++)n in d?(we(s,n,d[n]),_e(e[n],s,n,r,o)):we(s,n,e[n])}else for(let t=0,n=e.length;t<n;t++)_e(e[t],s,t,r,o);return void(s.length>e.length&&we(s,"length",e.length))}const i=Object.keys(e);for(let t=0,n=i.length;t<n;t++)_e(e[i[t]],s,i[t],r,o);const l=Object.keys(s);for(let t=0,n=l.length;t<n;t++)void 0===e[l[t]]&&we(s,l[t],void 0)}function Ce(e,t={}){const{merge:n,key:r="id"}=t,o=ge(e);return e=>{if(!pe(e)||!pe(o))return o;const t=_e(o,{[Le]:e},Le,n,r);return void 0===t?e:t}}const Se=Q("<span></span>");var Pe=e=>{const t=b((()=>{if(1==e.text.length){const t=e.text.codePointAt(0);if(t>=9600&&t<=9631||57520==t||57522==t)return t}})),n=b((()=>t()?" ":e.text)),r=b((()=>function(e,t,n){const r=e.get("fg"),o=e.get("bg");let s={"--offset":t,width:`${n+.01}ch`};"string"==typeof r&&(s["--fg"]=r);"string"==typeof o&&(s["--bg"]=o);return s}(e.pen,e.offset,e.width))),o=b((()=>function(e,t,n){const r=Ee(e.get("fg"),e.get("bold"),"fg-"),o=Ee(e.get("bg"),!1,"bg-");let s=n??"";void 0!==t&&(s+=` cp-${t.toString(16)}`);r&&(s+=" "+r);o&&(s+=" "+o);e.has("bold")&&(s+=" ap-bright");e.has("faint")&&(s+=" ap-faint");e.has("italic")&&(s+=" ap-italic");e.has("underline")&&(s+=" ap-underline");e.has("blink")&&(s+=" ap-blink");e.get("inverse")&&(s+=" ap-inverse");return s}(e.pen,t(),e.extraClass)));return(()=>{const e=Se.cloneNode(!0);return oe(e,n),y((t=>{const n=o(),s=r();return n!==t._v$&&ee(e,t._v$=n),t._v$2=ne(e,s,t._v$2),t}),{_v$:void 0,_v$2:void 0}),e})()};function Ee(e,t,n){if("number"==typeof e)return t&&e<8&&(e+=8),`${n}${e}`}const Fe=Q('<span class="ap-line" role="paragraph"></span>');var Te=e=>(()=>{const t=Fe.cloneNode(!0);return oe(t,K(Z,{get each(){return(()=>{if("number"==typeof e.cursor){const t=[];let n=0,r=0;for(;r<e.segments.length&&n+e.segments[r].text.length-1<e.cursor;){const o=e.segments[r];t.push(o),n+=o.text.length,r++}if(r<e.segments.length){const o=e.segments[r],s=e.cursor-n;for(s>0&&t.push({...o,text:o.text.substring(0,s)}),t.push({...o,text:o.text[s],offset:o.offset+s,extraClass:"ap-cursor"}),s<o.text.length-1&&t.push({...o,text:o.text.substring(s+1),offset:o.offset+s+1}),r++;r<e.segments.length;){const n=e.segments[r];t.push(n),r++}}return t}return e.segments})()},children:e=>K(Pe,function(...e){let t=!1;for(let n=0;n<e.length;n++){const o=e[n];t=t||!!o&&r in o,e[n]="function"==typeof o?(t=!0,b(o)):o}if(t)return new Proxy({get(t){for(let n=e.length-1;n>=0;n--){const r=R(e[n])[t];if(void 0!==r)return r}},has(t){for(let n=e.length-1;n>=0;n--)if(t in R(e[n]))return!0;return!1},keys(){const t=[];for(let n=0;n<e.length;n++)t.push(...Object.keys(R(e[n])));return[...new Set(t)]}},q);const n={};for(let t=e.length-1;t>=0;t--)if(e[t]){const r=Object.getOwnPropertyDescriptors(e[t]);for(const t in r)t in n||Object.defineProperty(n,t,{enumerable:!0,get(){for(let n=e.length-1;n>=0;n--){const r=(e[n]||{})[t];if(void 0!==r)return r}}})}return n}(e))})),t})();const He=Q('<pre class="ap-terminal" aria-live="polite" tabindex="0"></pre>');var Oe=e=>{const t=()=>e.lineHeight??1.3333333333,n=b((()=>({width:`${e.cols}ch`,height:t()*e.rows+"em","font-size":100*(e.scale||1)+"%","font-family":e.fontFamily,"--term-line-height":`${t()}em`,"--term-cols":e.cols}))),r=b((()=>e.cursor?.[0])),o=b((()=>e.cursor?.[1]));return(()=>{const t=He.cloneNode(!0),s=e.ref;return"function"==typeof s?re(s,t):e.ref=t,oe(t,K(I,{get each(){return e.lines},children:(e,t)=>K(Te,{get segments(){return e.segments},get cursor(){return b((()=>t()===o()))()?r():null}})})),y((r=>{const o=!(!e.blink&&!e.cursorHold),s=!!e.blink,i=n();return o!==r._v$&&t.classList.toggle("ap-cursor-on",r._v$=o),s!==r._v$2&&t.classList.toggle("ap-blink",r._v$2=s),r._v$3=ne(t,i,r._v$3),r}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})()};const Me=Q('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Pause" role="button"><path d="M1,0 L4,0 L4,12 L1,12 Z"></path><path d="M8,0 L11,0 L11,12 L8,12 Z"></path></svg>'),ze=Q('<svg version="1.1" viewBox="0 0 12 12" class="ap-icon" aria-label="Play" role="button"><path d="M1,0 L11,6 L1,12 Z"></path></svg>'),je=Q('<span class="ap-button ap-playback-button" tabindex="0"></span>'),Ne=Q('<span class="ap-bar"><span class="ap-gutter ap-gutter-empty"></span><span class="ap-gutter ap-gutter-full"></span></span>'),We=Q('<div class="ap-control-bar"><span class="ap-timer" aria-readonly="true" role="textbox" tabindex="0"><span class="ap-time-elapsed"></span><span class="ap-time-remaining"></span></span><span class="ap-progressbar"></span><span class="ap-button ap-kbd-button ap-tooltip-container" aria-label="Show keyboard shortcuts" role="button" tabindex="0"><svg version="1.1" viewBox="6 8 14 16" class="ap-icon"><path d="M0.938 8.313h22.125c0.5 0 0.938 0.438 0.938 0.938v13.5c0 0.5-0.438 0.938-0.938 0.938h-22.125c-0.5 0-0.938-0.438-0.938-0.938v-13.5c0-0.5 0.438-0.938 0.938-0.938zM1.594 22.063h20.813v-12.156h-20.813v12.156zM3.844 11.188h1.906v1.938h-1.906v-1.938zM7.469 11.188h1.906v1.938h-1.906v-1.938zM11.031 11.188h1.938v1.938h-1.938v-1.938zM14.656 11.188h1.875v1.938h-1.875v-1.938zM18.25 11.188h1.906v1.938h-1.906v-1.938zM5.656 15.031h1.938v1.938h-1.938v-1.938zM9.281 16.969v-1.938h1.906v1.938h-1.906zM12.875 16.969v-1.938h1.906v1.938h-1.906zM18.406 16.969h-1.938v-1.938h1.938v1.938zM16.531 20.781h-9.063v-1.906h9.063v1.906z"></path></svg><span class="ap-tooltip">Keyboard shortcuts (?)</span></span><span class="ap-button ap-fullscreen-button ap-tooltip-container" aria-label="Toggle fullscreen mode" role="button" tabindex="0"><svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-on"><path d="M12,0 L7,0 L9,2 L7,4 L8,5 L10,3 L12,5 Z"></path><path d="M0,12 L0,7 L2,9 L4,7 L5,8 L3,10 L5,12 Z"></path></svg><svg version="1.1" viewBox="0 0 12 12" class="ap-icon ap-icon-fullscreen-off"><path d="M7,5 L7,0 L9,2 L11,0 L12,1 L10,3 L12,5 Z"></path><path d="M5,7 L0,7 L2,9 L0,11 L1,12 L3,10 L5,12 Z"></path></svg><span class="ap-tooltip">Fullscreen (f)</span></span></div>'),De=Q('<span class="ap-marker-container ap-tooltip-container"><span class="ap-marker"></span><span class="ap-tooltip"></span></span>');function Ke(e){let t=Math.floor(e);const n=Math.floor(t/86400);t%=86400;const r=Math.floor(t/3600);t%=3600;const o=Math.floor(t/60);return t%=60,n>0?`${Be(n)}:${Be(r)}:${Be(o)}:${Be(t)}`:r>0?`${Be(r)}:${Be(o)}:${Be(t)}`:`${Be(o)}:${Be(t)}`}function Be(e){return e<10?`0${e}`:e.toString()}var qe=e=>{const t=e=>t=>{t.preventDefault(),e(t)},n=()=>"number"==typeof e.currentTime?Ke(e.currentTime):"--:--",r=()=>"number"==typeof e.remainingTime?"-"+Ke(e.remainingTime):n(),o=b((()=>"number"==typeof e.duration?e.markers.filter((t=>t[0]<e.duration)):[])),s=e=>{const t=e.currentTarget.offsetWidth,n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left;return 100*Math.max(0,r/t)+"%"},[i,l]=m(!1),a=function(e,t){let n=!0;return function(){if(n){n=!1;for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];e.apply(this,o),setTimeout((()=>n=!0),t)}}}(e.onSeekClick,50),c=t=>{t._marker||t.altKey||t.shiftKey||t.metaKey||t.ctrlKey||0!==t.button||(l(!0),e.onSeekClick(s(t)))},u=e=>{e.altKey||e.shiftKey||e.metaKey||e.ctrlKey||i()&&a(s(e))},f=()=>{l(!1)};return document.addEventListener("mouseup",f),x((()=>{document.removeEventListener("mouseup",f)})),(()=>{const s=We.cloneNode(!0),i=s.firstChild,l=i.firstChild,a=l.nextSibling,f=i.nextSibling,d=f.nextSibling,h=d.nextSibling,p=e.ref;return"function"==typeof p?re(p,s):e.ref=s,oe(s,K(U,{get when(){return e.isPausable},get children(){const n=je.cloneNode(!0);return te(n,"click",t(e.onPlayClick),!0),oe(n,K(X,{get children(){return[K(G,{get when(){return e.isPlaying},get children(){return Me.cloneNode(!0)}}),K(G,{get when(){return!e.isPlaying},get children(){return ze.cloneNode(!0)}})]}})),n}}),i),oe(l,n),oe(a,r),oe(f,K(U,{get when(){return"number"==typeof e.progress||e.isSeekable},get children(){const n=Ne.cloneNode(!0),r=n.firstChild.nextSibling;return n.$$mousemove=u,n.$$mousedown=c,oe(n,K(I,{get each(){return o()},children:(n,r)=>(()=>{const o=De.cloneNode(!0),s=o.firstChild,i=s.nextSibling;var l;return o.$$mousedown=e=>{e._marker=!0},te(o,"click",(l=r(),t((()=>{e.onSeekClick({marker:l})}))),!0),oe(i,(()=>(e=>""===e[1]?Ke(e[0]):`${Ke(e[0])} - ${e[1]}`)(n))),y((t=>{const r=(t=>t[0]/e.duration*100+"%")(n),i=!!(t=>"number"==typeof e.currentTime&&t[0]<=e.currentTime)(n);return r!==t._v$&&o.style.setProperty("left",t._v$=r),i!==t._v$2&&s.classList.toggle("ap-marker-past",t._v$2=i),t}),{_v$:void 0,_v$2:void 0}),o})()}),null),y((t=>ne(r,{transform:`scaleX(${e.progress||0}`},t))),n}})),te(d,"click",t(e.onHelpClick),!0),te(h,"click",t(e.onFullscreenClick),!0),y((()=>s.classList.toggle("ap-seekable",!!e.isSeekable))),s})()};Y(["click","mousedown","mousemove"]);const Re=Q('<div class="ap-overlay ap-overlay-error"><span>üí•</span></div>');var Ie=e=>Re.cloneNode(!0);const Ze=Q('<div class="ap-overlay ap-overlay-loading"><span class="ap-loader"></span></div>');var Ue=e=>Ze.cloneNode(!0);const Xe=Q('<div class="ap-overlay ap-overlay-info"><span></span></div>');var Ge=e=>(()=>{const t=Xe.cloneNode(!0),n=t.firstChild;return oe(n,(()=>e.message)),y((t=>ne(n,{"font-family":e.fontFamily},t))),t})();const Ve=Q('<div class="ap-overlay ap-overlay-start"><div class="ap-play-button"><div><span><svg version="1.1" viewBox="0 0 1000.0 1000.0" class="ap-icon"><defs><mask id="small-triangle-mask"><rect width="100%" height="100%" fill="white"></rect><polygon points="700.0 500.0, 400.00000000000006 326.7949192431122, 399.9999999999999 673.2050807568877" fill="black"></polygon></mask></defs><polygon points="1000.0 500.0, 250.0000000000001 66.98729810778059, 249.99999999999977 933.0127018922192" mask="url(#small-triangle-mask)" fill="white" class="ap-play-btn-fill"></polygon><polyline points="673.2050807568878 400.0, 326.7949192431123 600.0" stroke="white" stroke-width="90" class="ap-play-btn-stroke"></polyline></svg></span></div></div></div>');var Je=e=>(()=>{const t=Ve.cloneNode(!0);var n;return te(t,"click",(n=e.onClick,e=>{e.preventDefault(),n(e)}),!0),t})();Y(["click"]);const Qe=Q('<div class="ap-overlay ap-overlay-help"><div><div><p>Keyboard shortcuts</p><ul><li><kbd>space</kbd> - pause / resume</li><li><kbd>f</kbd> - toggle fullscreen mode</li><li><kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 5 seconds</li><li><kbd>Shift</kbd> + <kbd>‚Üê</kbd> / <kbd>‚Üí</kbd> - rewind / fast-forward by 10%</li><li><kbd>[</kbd> / <kbd>]</kbd> - jump to the previous / next marker</li><li><kbd>0</kbd>, <kbd>1</kbd>, <kbd>2</kbd> ... <kbd>9</kbd> - jump to 0%, 10%, 20% ... 90%</li><li><kbd>,</kbd> / <kbd>.</kbd> - step back / forward, a frame at a time (when paused)</li><li><kbd>?</kbd> - toggle this help popup</li></ul></div></div></div>');var Ye=e=>(()=>{const t=Qe.cloneNode(!0),n=t.firstChild;var r;return te(t,"click",(r=e.onClose,e=>{e.preventDefault(),r(e)}),!0),n.$$click=e=>{e.stopPropagation()},y((n=>ne(t,{"font-family":e.fontFamily},n))),t})();Y(["click"]);const et=Q('<div class="ap-wrapper" tabindex="-1"><div></div></div>');var tt=e=>{const t=e.logger,n=e.core,r=e.autoPlay,[o,s]=Ae({lines:[],cursor:void 0,charW:e.charW,charH:e.charH,bordersW:e.bordersW,bordersH:e.bordersH,containerW:0,containerH:0,isPausable:!0,isSeekable:!0,isFullscreen:!1,currentTime:null,remainingTime:null,progress:null,blink:!0,cursorHold:!1}),[i,l]=m(!1),[a,c]=m(r?null:"start"),[u,f]=m(null),[d,h]=m({cols:e.cols,rows:e.rows},{equals:(e,t)=>e.cols===t.cols&&e.rows===t.rows}),[p,g]=m(void 0),[v,w]=Ae([]),[A,L]=m(!1),[_,C]=m(!1),[S,P]=m(void 0),E=b((()=>d().cols||80)),F=b((()=>d().rows||24)),T=()=>!1===e.controls?0:32;let H,O,M,z,j,N,W,D,B;function q(){he(),ue(),fe()}function R(e){k((()=>{e.rows<d().rows&&s("lines",o.lines.slice(0,e.rows)),h(e)}))}function I(e){void 0===e||r||s({lines:e.lines,cursor:e.cursor})}n.addEventListener("init",(e=>{let{cols:t,rows:n,duration:r,theme:o,poster:s,markers:i}=e;k((()=>{R({cols:t,rows:n}),g(r),P(o),w(i),I(s)}))})),n.addEventListener("play",(()=>{c(null)})),n.addEventListener("playing",(()=>{k((()=>{l(!0),c(null),J(),de(),ce()}))})),n.addEventListener("idle",(()=>{k((()=>{l(!1),q()}))})),n.addEventListener("loading",(()=>{k((()=>{l(!1),q(),c("loader")}))})),n.addEventListener("offline",(e=>{let{message:t}=e;k((()=>{l(!1),q(),void 0!==t&&(f(t),c("info"))}))}));let Z=0;n.addEventListener("ended",(e=>{let{message:n}=e;k((()=>{l(!1),q(),void 0!==n&&(f(n),c("info"))})),t.debug(`view: render count: ${Z}`)})),n.addEventListener("errored",(()=>{c("error")})),n.addEventListener("resize",R),n.addEventListener("reset",(e=>{let{cols:t,rows:n,theme:r}=e;k((()=>{R({cols:t,rows:n}),P(r),J()}))})),n.addEventListener("seeked",(()=>{fe()})),n.addEventListener("terminalUpdate",(()=>{void 0===H&&(H=requestAnimationFrame(J))}));const V=()=>{B=new ResizeObserver(function(e,t){let n;return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];clearTimeout(n),n=setTimeout((()=>e.apply(this,o)),t)}}((e=>{s({containerW:j.offsetWidth,containerH:j.offsetHeight}),j.dispatchEvent(new CustomEvent("resize",{detail:{el:N}}))}),10)),B.observe(j)};$((async()=>{t.info("view: mounted"),t.debug("view: font measurements",{charW:o.charW,charH:o.charH}),V();const{isPausable:e,isSeekable:i,poster:l}=await n.init();k((()=>{s({isPausable:e,isSeekable:i,containerW:j.offsetWidth,containerH:j.offsetHeight}),I(l)})),r&&n.play()})),x((()=>{n.stop(),he(),ue(),B.disconnect()}));const J=async()=>{const e=await n.getChanges();k((()=>{void 0!==e.lines&&e.lines.forEach(((e,t)=>{s("lines",t,Ce(e))})),void 0!==e.cursor&&s("cursor",Ce(e.cursor)),s("cursorHold",!0)})),H=void 0,Z+=1},Q=b((()=>{const t=o.charW*E()+o.bordersW,n=o.charH*F()+o.bordersH;let r=e.fit??"width";if("both"===r||o.isFullscreen){r=o.containerW/(o.containerH-T())>t/n?"height":"width"}if(!1===r||"none"===r)return{};if("width"===r){const e=o.containerW/t;return{scale:e,width:o.containerW,height:n*e+T()}}if("height"===r){const e=(o.containerH-T())/n;return{scale:e,width:t*e,height:o.containerH}}throw`unsupported fit mode: ${r}`})),Y=()=>{s("isFullscreen",document.fullscreenElement??document.webkitFullscreenElement)},te=()=>{o.isFullscreen?(document.exitFullscreen??document.webkitExitFullscreen??(()=>{})).apply(document):(j.requestFullscreen??j.webkitRequestFullscreen??(()=>{})).apply(j)},se=()=>{_()?C(!1):(n.pause(),C(!0))},ie=e=>{if(!(e.altKey||e.metaKey||e.ctrlKey)){if(" "==e.key)n.togglePlay();else if(","==e.key)n.step(-1),fe();else if("."==e.key)n.step(),fe();else if("f"==e.key)te();else if("["==e.key)n.seek({marker:"prev"});else if("]"==e.key)n.seek({marker:"next"});else if(e.key.charCodeAt(0)>=48&&e.key.charCodeAt(0)<=57){const t=(e.key.charCodeAt(0)-48)/10;n.seek(100*t+"%")}else if("?"==e.key)se();else if("ArrowLeft"==e.key)e.shiftKey?n.seek("<<<"):n.seek("<<");else if("ArrowRight"==e.key)e.shiftKey?n.seek(">>>"):n.seek(">>");else{if("Escape"!=e.key)return;C(!1)}e.stopPropagation(),e.preventDefault()}},le=()=>{o.isFullscreen&&pe(!0)},ae=()=>{o.isFullscreen||pe(!1)},ce=()=>{M=setInterval(fe,100)},ue=()=>{clearInterval(M)},fe=async()=>{const e=await n.getCurrentTime(),t=await n.getRemainingTime(),r=await n.getProgress();s({currentTime:e,remainingTime:t,progress:r})},de=()=>{z=setInterval((()=>{s((e=>{const t={blink:!e.blink};return t.blink&&(t.cursorHold=!1),t}))}),500)},he=()=>{clearInterval(z),s("blink",!0)},pe=e=>{clearTimeout(O),e&&(O=setTimeout((()=>pe(!1)),2e3)),L(e)},ge=b((()=>{const t=e.theme||"auto/asciinema";return"auto/"===t.slice(0,5)?{name:t.slice(5),colors:S()}:{name:t}})),ve=(()=>{const t=et.cloneNode(!0),r=t.firstChild;"function"==typeof j?re(j,t):j=t,t.addEventListener("webkitfullscreenchange",Y),t.addEventListener("fullscreenchange",Y),t.$$mousemove=le,t.$$keydown=ie;return"function"==typeof N?re(N,r):N=r,r.$$mousemove=()=>pe(!0),r.addEventListener("mouseleave",ae),oe(r,K(Oe,{get cols(){return E()},get rows(){return F()},get scale(){return Q()?.scale},get blink(){return o.blink},get lines(){return o.lines},get cursor(){return o.cursor},get cursorHold(){return o.cursorHold},get fontFamily(){return e.terminalFontFamily},get lineHeight(){return e.terminalLineHeight},ref(e){"function"==typeof W?W(e):W=e}}),null),oe(r,K(U,{get when(){return!1!==e.controls},get children(){return K(qe,{get duration(){return p()},get currentTime(){return o.currentTime},get remainingTime(){return o.remainingTime},get progress(){return o.progress},markers:v,get isPlaying(){return i()},get isPausable(){return o.isPausable},get isSeekable(){return o.isSeekable},onPlayClick:()=>n.togglePlay(),onFullscreenClick:te,onHelpClick:se,onSeekClick:e=>n.seek(e),ref(e){"function"==typeof D?D(e):D=e}})}}),null),oe(r,K(X,{get children(){return[K(G,{get when(){return"start"==a()},get children(){return K(Je,{onClick:()=>n.play()})}}),K(G,{get when(){return"loader"==a()},get children(){return K(Ue,{})}}),K(G,{get when(){return"info"==a()},get children(){return K(Ge,{get message(){return u()},get fontFamily(){return e.terminalFontFamily}})}}),K(G,{get when(){return"error"==a()},get children(){return K(Ie,{})}})]}}),null),oe(r,K(U,{get when(){return _()},get children(){return K(Ye,{get fontFamily(){return e.terminalFontFamily},onClose:()=>C(!1)})}}),null),y((n=>{const o=!!(!0===e.controls||"auto"===e.controls&&A()),s=`ap-player asciinema-player-theme-${ge().name}`,i=(()=>{const t={};!1!==e.fit&&"none"!==e.fit||void 0===e.terminalFontSize||("small"===e.terminalFontSize?t["font-size"]="12px":"medium"===e.terminalFontSize?t["font-size"]="18px":"big"===e.terminalFontSize?t["font-size"]="24px":t["font-size"]=e.terminalFontSize);const n=Q();void 0!==n.width&&(t.width=`${n.width}px`,t.height=`${n.height}px`);const r=ge().colors;return void 0!==r&&(t["--term-color-foreground"]=r.foreground,t["--term-color-background"]=r.background,r.palette.forEach(((e,n)=>{t[`--term-color-${n}`]=e}))),t})();return o!==n._v$&&t.classList.toggle("ap-hud",n._v$=o),s!==n._v$2&&ee(r,n._v$2=s),n._v$3=ne(r,i,n._v$3),n}),{_v$:void 0,_v$2:void 0,_v$3:void 0}),t})();return ve};function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=function(e,t){const n=80,r=24,o=document.createElement("div");let s;o.style.height="0px",o.style.overflow="hidden",o.style.fontSize="15px",document.body.appendChild(o);const i=J((()=>(s=K(Oe,{cols:n,rows:r,lineHeight:t,fontFamily:e,lines:[]}),s)),o),l={charW:s.clientWidth/n,charH:s.clientHeight/r,bordersW:s.offsetWidth-s.clientWidth,bordersH:s.offsetHeight-s.clientHeight};return i(),document.body.removeChild(o),l}(n.terminalFontFamily,n.terminalLineHeight),o={core:e,logger:n.logger,cols:n.cols,rows:n.rows,fit:n.fit,controls:n.controls??"auto",autoPlay:n.autoPlay??n.autoplay,terminalFontSize:n.terminalFontSize,terminalFontFamily:n.terminalFontFamily,terminalLineHeight:n.terminalLineHeight,theme:n.theme,...r};let s;const i=J((()=>(s=K(tt,o),s)),t),l={el:s,dispose:i,getCurrentTime:()=>e.getCurrentTime(),getDuration:()=>e.getDuration(),play:()=>e.play(),pause:()=>e.pause(),seek:t=>e.seek(t),addEventListener:(t,n)=>e.addEventListener(t,n.bind(l))};return l}Y(["keydown","mousemove"]);const rt=["cols","idleTimeLimit","loop","markers","pauseOnMarkers","poster","preload","rows","speed","startAt"],ot=["autoPlay","autoplay","cols","controls","fit","rows","terminalFontFamily","terminalFontSize","terminalLineHeight","theme"];class st{constructor(e,t,n){this.worker=new Worker(e),this.worker.onmessage=this._onMessage.bind(this),this.src=t,this.opts=n,this.nextId=1,this.eventHandlers=new Map([["ended",[]],["errored",[]],["idle",[]],["init",[]],["input",[]],["loading",[]],["marker",[]],["offline",[]],["pause",[]],["play",[]],["playing",[]],["reset",[]],["resize",[]],["seeked",[]],["terminalUpdate",[]]]),this.resolves=new Map,this._sendCommand("new",[this.src,this.opts])}async init(){return this._sendCommand("init")}play(){return this._sendCommand("play")}pause(){return this._sendCommand("pause")}togglePlay(){return this._sendCommand("togglePlay")}seek(e){return this._sendCommand("seek",e)}step(e){return this._sendCommand("step",e)}stop(){return this._sendCommand("stop")}getChanges(){return this._sendCommand("getChanges")}getCurrentTime(){return this._sendCommand("getCurrentTime")}getRemainingTime(){return this._sendCommand("getRemainingTime")}getProgress(){return this._sendCommand("getProgress")}getDuration(){return this._sendCommand("getDuration")}addEventListener(e,t){const n=this.eventHandlers.get(e);0===n.length&&this._sendNotification("addEventListener",[e]),n.push(t)}_dispatchEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const n of this.eventHandlers.get(e))n(t)}_sendCommand(e,t){let n;const r=new Promise((e=>{n=e}));return this.resolves.set(this.nextId,n),this.worker.postMessage({method:e,params:t,id:this.nextId}),this.nextId++,r}_sendNotification(e,t){this.worker.postMessage({method:e,params:t})}_onMessage(e){void 0!==e.data.id?(this.resolves.get(e.data.id)(e.data.result),this.resolves.delete(e.data.id)):"onEvent"===e.data.method&&this._dispatchEvent(e.data.params.name,e.data.params.event)}}return e.create=function(e,n,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=o.logger===console||void 0,i=new st(r,e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return rt.includes(t)}))),...t}}(o,{logger:s}));return nt(i,n,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{...Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return ot.includes(t)}))),...t}}(o,{logger:o.logger??new t}))},e}({});
